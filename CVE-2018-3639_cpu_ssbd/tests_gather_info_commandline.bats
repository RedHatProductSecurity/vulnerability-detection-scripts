#!/usr/bin/env bats

. test_harness

@test "gather_info_commandline -- Nothing disabled" {
    export MOCK_CMDLINE_PATH=file_mocks/cmdline/none

    gather_info_commandline; run gather_info_commandline
    (( spec_store_bypass_disable == 0 ))
    (( nospec_store_bypass_disable == 0 ))
}


@test "gather_info_commandline -- spec_store_bypass_disable" {
    export MOCK_CMDLINE_PATH=file_mocks/cmdline/spec_store_bypass_disable

    gather_info_commandline; run gather_info_commandline
    (( spec_store_bypass_disable == 1 ))
    (( nospec_store_bypass_disable == 0 ))
}


@test "gather_info_commandline -- nospec_store_bypass_disable" {
    export MOCK_CMDLINE_PATH=file_mocks/cmdline/nospec_store_bypass_disable

    gather_info_commandline; run gather_info_commandline
    (( spec_store_bypass_disable == 0 ))
    (( nospec_store_bypass_disable == 1 ))
}
