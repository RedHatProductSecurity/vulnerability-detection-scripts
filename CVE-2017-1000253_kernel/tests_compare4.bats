#!/usr/bin/env bats

. test_harness


@test "compare4 -- Equal" {
    run compare4 "1.1.1-1" "=" "1.1.1-1"
    (( status == 0 ))

    run compare4 "1.1.1-1" "=" "2.1.1-1"
    (( status == 1 ))

    run compare4 "1.1.1-1" "=" "1.2.1-1"
    (( status == 1 ))

    run compare4 "1.1.1-1" "=" "1.1.2-1"
    (( status == 1 ))

    run compare4 "1.1.1-1" "=" "1.1.1-2"
    (( status == 1 ))

    run compare4 "2.1.1-1" "=" "1.1.1-1"
    (( status == 1 ))

    run compare4 "1.2.1-1" "=" "1.1.1-1"
    (( status == 1 ))

    run compare4 "1.1.2-1" "=" "1.1.1-1"
    (( status == 1 ))

    run compare4 "1.1.1-2" "=" "1.1.1-1"
    (( status == 1 ))
}


@test "compare4 -- Greater" {
    run compare4 "1.1.1-1" ">" "1.1.1-1"
    (( status == 1 ))

    run compare4 "2.1.1-1" ">" "1.1.1-1"
    (( status == 0 ))

    run compare4 "1.2.1-1" ">" "1.1.1-1"
    (( status == 0 ))

    run compare4 "1.1.2-1" ">" "1.1.1-1"
    (( status == 0 ))

    run compare4 "1.1.1-2" ">" "1.1.1-1"
    (( status == 0 ))

    run compare4 "1.1.1-1" ">" "2.1.1-1"
    (( status == 1 ))

    run compare4 "1.1.1-1" ">" "1.2.1-1"
    (( status == 1 ))

    run compare4 "1.1.1-1" ">" "1.1.2-1"
    (( status == 1 ))

    run compare4 "1.1.1-1" ">" "1.1.1-2"
    (( status == 1 ))
}

@test "compare4 -- Less" {
    run compare4 "1.1.1-1" "<" "1.1.1-1"
    (( status == 1 ))

    run compare4 "2.1.1-1" "<" "1.1.1-1"
    (( status == 1 ))

    run compare4 "1.2.1-1" "<" "1.1.1-1"
    (( status == 1 ))

    run compare4 "1.1.2-1" "<" "1.1.1-1"
    (( status == 1 ))

    run compare4 "1.1.1-2" "<" "1.1.1-1"
    (( status == 1 ))

    run compare4 "1.1.1-1" "<" "2.1.1-1"
    (( status == 0 ))

    run compare4 "1.1.1-1" "<" "1.2.1-1"
    (( status == 0 ))

    run compare4 "1.1.1-1" "<" "1.1.2-1"
    (( status == 0 ))

    run compare4 "1.1.1-1" "<" "1.1.1-2"
    (( status == 0 ))
}

@test "compare4 -- Greater Equal" {
    run compare4 "1.1.1-1" ">=" "1.1.1-1"
    (( status == 0 ))

    run compare4 "2.1.1-1" ">=" "1.1.1-1"
    (( status == 0 ))

    run compare4 "1.2.1-1" ">=" "1.1.1-1"
    (( status == 0 ))

    run compare4 "1.1.2-1" ">=" "1.1.1-1"
    (( status == 0 ))

    run compare4 "1.1.1-2" ">=" "1.1.1-1"
    (( status == 0 ))

    run compare4 "1.1.1-1" ">=" "2.1.1-1"
    (( status == 1 ))

    run compare4 "1.1.1-1" ">=" "1.2.1-1"
    (( status == 1 ))

    run compare4 "1.1.1-1" ">=" "1.1.2-1"
    (( status == 1 ))

    run compare4 "1.1.1-1" ">=" "1.1.1-2"
    (( status == 1 ))
}


@test "compare4 -- Less Equal" {
    run compare4 "1.1.1-1" "<=" "1.1.1-1"
    (( status == 0 ))

    run compare4 "2.1.1-1" "<=" "1.1.1-1"
    (( status == 1 ))

    run compare4 "1.2.1-1" "<=" "1.1.1-1"
    (( status == 1 ))

    run compare4 "1.1.2-1" "<=" "1.1.1-1"
    (( status == 1 ))

    run compare4 "1.1.1-2" "<=" "1.1.1-1"
    (( status == 1 ))

    run compare4 "1.1.1-1" "<=" "2.1.1-1"
    (( status == 0 ))

    run compare4 "1.1.1-1" "<=" "1.2.1-1"
    (( status == 0 ))

    run compare4 "1.1.1-1" "<=" "1.1.2-1"
    (( status == 0 ))

    run compare4 "1.1.1-1" "<=" "1.1.1-2"
    (( status == 0 ))
}

@test "compare4 -- Not Equal" {
    run compare4 "1.1.1-1" "<>" "1.1.1-1"
    (( status == 1 ))

    run compare4 "2.1.1-1" "<>" "1.1.1-1"
    (( status == 0 ))

    run compare4 "1.2.1-1" "<>" "1.1.1-1"
    (( status == 0 ))

    run compare4 "1.1.2-1" "<>" "1.1.1-1"
    (( status == 0 ))

    run compare4 "1.1.1-2" "<>" "1.1.1-1"
    (( status == 0 ))

    run compare4 "1.1.1-1" "<>" "2.1.1-1"
    (( status == 0 ))

    run compare4 "1.1.1-1" "<>" "1.2.1-1"
    (( status == 0 ))

    run compare4 "1.1.1-1" "<>" "1.1.2-1"
    (( status == 0 ))

    run compare4 "1.1.1-1" "<>" "1.1.1-2"
    (( status == 0 ))
}


@test "compare4 -- Multi-digit" {
    run compare4 "10.1.51-16" "=" "10.1.51-16"
    (( status == 0 ))

    run compare4 "1.10.1-1" ">" "1.1.1-1"
    (( status == 0 ))

    run compare4 "1.2.1-1" ">" "1.1.100-1"
    (( status == 0 ))

    run compare4 "1.1.2-1" "<" "1.1.10-1"
    (( status == 0 ))

    run compare4 "1.1.1-10" "<" "1.1.1-100"
    (( status == 0 ))
}
