#!/bin/bash

rm -rf fake_jars_nonvuln
mkdir fake_jars_nonvuln
(
    cd fake_jars_nonvuln && (
        bash ../gen-fake-jars-fixed-spring-beans.sh
        bash ../gen-fake-jars-fixed-spring-cloud.sh
        bash ../gen-fake-jars-fixed-spring-webflux.sh
        bash ../gen-fake-jars-fixed-spring-webmvc.sh
    )
)


rm -rf fake_jars_nonvuln_additional
mkdir fake_jars_nonvuln_additional
(
    cd fake_jars_nonvuln_additional && (
        bash ../gen-fake-jars-fixed-quarkus-beans.sh
        bash ../gen-fake-jars-fixed-quarkus-beans-rh.sh
        bash ../gen-fake-jars-fixed-servicemix.sh
    )
)


rm -rf fake_jars_vuln
mkdir fake_jars_vuln
(
    cd fake_jars_vuln && (
        bash ../gen-fake-jars-vuln-spring-beans.sh
        bash ../gen-fake-jars-vuln-spring-cloud.sh
        bash ../gen-fake-jars-vuln-spring-webflux.sh
        bash ../gen-fake-jars-vuln-spring-webmvc.sh
    )
)


rm -rf fake_jars_vuln_additional
mkdir fake_jars_vuln_additional
(
    cd fake_jars_vuln_additional && (
        bash ../gen-fake-jars-vuln-quarkus-beans.sh
        bash ../gen-fake-jars-vuln-quarkus-beans-rh.sh
        bash ../gen-fake-jars-vuln-servicemix.sh
    )
)


rm -rf fake_jar_test_battery_smoke_1
mkdir fake_jar_test_battery_smoke_1
cp fake_jars_vuln/spring-webmvc-5.3.17.jar fake_jar_test_battery_smoke_1/
cp fake_jars_nonvuln/spring-webmvc-5.3.18.jar fake_jar_test_battery_smoke_1/


rm -rf fake_jar_test_battery_smoke_2
mkdir -p fake_jar_test_battery_smoke_2/subdir
cp fake_jars_vuln/spring-webmvc-5.3.17.jar fake_jar_test_battery_smoke_2/subdir/
cp fake_jars_nonvuln/spring-webmvc-5.3.18.jar fake_jar_test_battery_smoke_2/subdir/
cp fake_jars_nonvuln/spring-webflux-5.2.20.RELEASE.jar fake_jar_test_battery_smoke_2/-X
cp fake_jars_vuln/spring-webflux-5.2.19.RELEASE.jar fake_jar_test_battery_smoke_2/-i
cp fake_jars_vuln/spring-cloud-function-context-3.2.2.jar fake_jar_test_battery_smoke_2/-E

rm -rf fake_jar_test_battery_smoke_3
mkdir fake_jar_test_battery_smoke_3
cp -R fake_jar_test_battery_smoke_1 fake_jar_test_battery_smoke_3/
cp -R fake_jar_test_battery_smoke_2 fake_jar_test_battery_smoke_3/
(
    cd fake_jar_test_battery_smoke_3 && (
        zip -0 -r zipped.zip fake_jar_test_battery_smoke_*
        rm -rf fake_jar_test_battery_smoke_*
    )
)

