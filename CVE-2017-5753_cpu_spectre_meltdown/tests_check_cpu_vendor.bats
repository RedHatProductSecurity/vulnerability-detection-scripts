#!/usr/bin/env bats

. test_harness


@test "check_cpu_vendor -- Intel" {
    MOCK_CPU_INFO_PATH=integration/file_mocks/cpuinfo/intel
    run check_cpu_vendor
    [[ "$output" == "Intel" ]]
    (( status == 0 ))
}

@test "check_cpu_vendor -- AMD" {
    MOCK_CPU_INFO_PATH=integration/file_mocks/cpuinfo/amd
    run check_cpu_vendor
    [[ "$output" == "AMD" ]]
    (( status == 0 ))
}

@test "check_cpu_vendor -- POWER" {
    MOCK_CPU_INFO_PATH=integration/file_mocks/cpuinfo/power8
    run check_cpu_vendor
    [[ "$output" == "POWER" ]]
    (( status == 0 ))
}

@test "check_cpu_vendor -- ARM" {
    MOCK_CPU_INFO_PATH=integration/file_mocks/cpuinfo/arm
    run check_cpu_vendor
    [[ "$output" == "" ]]
    (( status == 1 ))
}
